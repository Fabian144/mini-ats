import{r as m,j as e}from"./vendor-radix-DY4qudGL.js";import{D as V,S as y,a as g,b as j,c as v,d as f,A as J,e as P,f as B,g as I,h as q,i as H,j as z,k as O,l as R}from"./select-CvSdUyXN.js";import{u as U}from"./useJobs-BkXMN-CL.js";import{b as _,u as Y}from"./index-DNV64M_Z.js";import{B as l,I as c}from"./input-DfHDpxEA.js";import{L as n,C as N,d as b,a as $,b as Z}from"./card-Bc5TMgtP.js";import{T as G,S as K}from"./textarea-D8Fo3nq2.js";import{D as Q,a as W,P as X,b as ee,c as ae,d as se,T as te}from"./dialog-CmFRaKVp.js";import{B as le}from"./briefcase-DVqZFEiA.js";import"./vendor-supabase-6c5mf4pY.js";import"./vendor-react-EpQGxqdE.js";import"./vendor-query-CH72qb2W.js";import"./vendor-recharts-zFAyUZWb.js";const ne=_("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const re=_("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),ie=["Deltid","Tillsvidare","Heltid","Säsongsarbete","Vikariat","Extrajobb","Sommarjobb","Visstid","Möjlighet till förnyat kontrakt","Projekt","Praktik"],ce=[{value:"monthly",label:"Månadsvis"},{value:"hourly",label:"Timlön"}];function be(){const{isAdmin:k,adminViewAccount:o,user:C}=Y(),{jobs:h,isLoading:A,createJob:S,updateJob:D,deleteJob:T}=U(),[L,i]=m.useState(!1),[r,d]=m.useState(null),[s,t]=m.useState({title:"",company:"",location:"",description:"",employment_type:"",salary_amount:"",salary_unit:""}),w=a=>{if(a.preventDefault(),!s.employment_type||s.salary_amount&&!s.salary_unit)return;const x={...s,employment_type:s.employment_type||null,salary_amount:s.salary_amount?Number(s.salary_amount):null,salary_unit:s.salary_unit||null};r?D.mutate({id:r.id,...x}):S.mutate(x),i(!1),d(null),t({title:"",company:"",location:"",description:"",employment_type:"",salary_amount:"",salary_unit:""})},M=a=>{d(a),t({title:a.title,company:a.company||"",location:a.location||"",description:a.description||"",employment_type:a.employment_type||"",salary_amount:a.salary_amount?.toString()||"",salary_unit:a.salary_unit||""}),i(!0)},p=()=>{i(!1),d(null),t({title:"",company:"",location:"",description:"",employment_type:"",salary_amount:"",salary_unit:""})},F=k&&!o,u=o?.fullName||o?.email||C?.email,E=s.title.trim().length>0&&s.company.trim().length>0&&s.location.trim().length>0&&s.employment_type.trim().length>0&&!(s.salary_amount&&!s.salary_unit);return e.jsx(V,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Jobb"}),e.jsx("p",{className:"text-muted-foreground",children:"Hantera dina rekryteringsuppdrag"})]}),e.jsxs(Q,{open:L,onOpenChange:a=>a?i(!0):p(),children:[e.jsx(W,{asChild:!0,children:e.jsxs(l,{disabled:F,children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Lägg till jobb"]})}),e.jsxs(ee,{children:[e.jsx(ae,{children:e.jsx(se,{children:r?"Redigera jobb":"Lägg till jobb"})}),u&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[r?"Redigeras för konto":"Skapas för konto",e.jsx("span",{className:"font-medium",children:u})]}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"title",children:["Jobbtitel ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(c,{id:"title",value:s.title,onChange:a=>t({...s,title:a.target.value}),placeholder:"t.ex. Frontend-utvecklare",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"company",children:["Företag ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(c,{id:"company",value:s.company,onChange:a=>t({...s,company:a.target.value}),placeholder:"t.ex. TechAB",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"location",children:["Plats ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(c,{id:"location",value:s.location,onChange:a=>t({...s,location:a.target.value}),placeholder:"t.ex. Stockholm",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"employmentType",children:["Anställningsform ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(y,{value:s.employment_type,onValueChange:a=>t({...s,employment_type:a}),children:[e.jsx(g,{id:"employmentType",children:e.jsx(j,{placeholder:"Välj anställningsform"})}),e.jsx(v,{children:ie.map(a=>e.jsx(f,{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"salaryAmount",children:"Lön"}),e.jsx(c,{id:"salaryAmount",type:"number",min:"0",value:s.salary_amount,onChange:a=>t({...s,salary_amount:a.target.value}),placeholder:"t.ex. 35000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"salaryUnit",children:"Lönetyp"}),e.jsxs(y,{value:s.salary_unit,onValueChange:a=>t({...s,salary_unit:a}),children:[e.jsx(g,{id:"salaryUnit",children:e.jsx(j,{placeholder:"Välj"})}),e.jsx(v,{children:ce.map(a=>e.jsx(f,{value:a.value,children:a.label},a.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"description",children:"Beskrivning"}),e.jsx(G,{id:"description",value:s.description,onChange:a=>t({...s,description:a.target.value}),placeholder:"Beskriv rollen...",rows:4})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(l,{type:"button",variant:"outline",onClick:p,children:"Avbryt"}),e.jsx(l,{type:"submit",disabled:!E,children:r?"Spara":"Skapa"})]})]})]})]})]}),A?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Laddar..."}):h.length===0?e.jsx(N,{className:"text-center py-12",children:e.jsxs(b,{children:[e.jsx(le,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"font-medium text-lg mb-2",children:"Inga jobb ännu"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Lägg till ditt första rekryteringsuppdrag"})]})}):e.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(a=>e.jsxs(N,{className:"w-full min-w-0 max-w-[35em] flex-[1_1_365px]",children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(Z,{className:"text-lg",children:a.title}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>M(a),children:e.jsx(K,{className:"w-4 h-4"})}),e.jsxs(J,{children:[e.jsx(P,{asChild:!0,children:e.jsx(l,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",children:e.jsx(te,{className:"w-4 h-4"})})}),e.jsxs(B,{children:[e.jsxs(I,{children:[e.jsx(q,{children:"Ta bort jobb?"}),e.jsx(H,{children:"Detta tar bort jobbet och alla kopplade kandidater. Åtgarden går inte att ångra."})]}),e.jsxs(z,{children:[e.jsx(O,{asChild:!0,children:e.jsx(l,{type:"button",variant:"outline",children:"Avbryt"})}),e.jsx(R,{asChild:!0,children:e.jsx(l,{type:"button",variant:"destructive",onClick:()=>T.mutate(a.id),children:"Ta bort"})})]})]})]})]})]})}),e.jsx(b,{children:e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[a.company&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:a.company})]}),a.location&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:a.location})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:a.employment_type?`Anställningsform: ${a.employment_type}`:"Anställningsform: Ej angiven"})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{children:[a.salary_amount?`Lön: ${Number(a.salary_amount).toLocaleString("sv-SE")} kr`:"Lön: Ej angiven",a.salary_amount&&(a.salary_unit==="hourly"?" / tim":a.salary_unit==="monthly"?" / mån":"")]})}),e.jsx("p",{className:"line-clamp-2 pt-2 border-t border-border mt-3",children:a.description||"Ingen beskrivning angiven"})]})})]},a.id))})]})})}export{be as default};
