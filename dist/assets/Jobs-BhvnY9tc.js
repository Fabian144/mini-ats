import{r as h,j as e}from"./vendor-radix-og3wzDO_.js";import{D as B,e as J,f as P,g as q,h as I,i as H,S as g,a as j,b as v,c as f,d as N,A as z,j as O,k as R,l as U,m as Y,n as $,o as Z,p as G,q as K}from"./select-BR8Zaacj.js";import{u as Q}from"./useJobs-BPjPmGfw.js";import{b as k,u as W}from"./index-GMuvxNkA.js";import{B as l}from"./button-Dmk4haUU.js";import{L as n,I as c}from"./label-Bl6YtxFr.js";import{T as X}from"./textarea-FhCttuFF.js";import{C as b,d as _,a as ee,b as ae}from"./card-BWVOiSMK.js";import{P as te,S as se,T as le}from"./trash-2-4Ypgs7eR.js";import{B as ne}from"./briefcase-DvUh9ThT.js";import"./vendor-supabase-6c5mf4pY.js";import"./vendor-react-DChhcE8F.js";import"./vendor-query-CUB_NE-9.js";import"./vendor-recharts-qYF2F-lo.js";const re=k("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const ie=k("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),oe=["Deltid","Tillsvidare","Heltid","Säsongsarbete","Vikariat","Extrajobb","Sommarjobb","Visstid","Möjlighet till förnyat kontrakt","Projekt","Praktik"],ce=[{value:"monthly",label:"Månadsvis"},{value:"hourly",label:"Timlön"}];function ke(){const{isAdmin:p,adminViewAccount:d,user:A}=W(),{jobs:i,isLoading:C,createJob:S,updateJob:D,deleteJob:T}=Q(),[w,o]=h.useState(!1),[r,m]=h.useState(null),[t,s]=h.useState({title:"",company:"",location:"",description:"",employment_type:"",salary_amount:"",salary_unit:""}),L=a=>{if(a.preventDefault(),!t.employment_type||t.salary_amount&&!t.salary_unit)return;const y={...t,employment_type:t.employment_type||null,salary_amount:t.salary_amount?Number(t.salary_amount):null,salary_unit:t.salary_unit||null};r?D.mutate({id:r.id,...y}):S.mutate(y),o(!1),m(null),s({title:"",company:"",location:"",description:"",employment_type:"",salary_amount:"",salary_unit:""})},M=a=>{m(a),s({title:a.title,company:a.company||"",location:a.location||"",description:a.description||"",employment_type:a.employment_type||"",salary_amount:a.salary_amount?.toString()||"",salary_unit:a.salary_unit||""}),o(!0)},u=()=>{o(!1),m(null),s({title:"",company:"",location:"",description:"",employment_type:"",salary_amount:"",salary_unit:""})},F=p&&!d,x=d?.fullName||d?.email||A?.email,E=p&&!!x,V=t.title.trim().length>0&&t.company.trim().length>0&&t.location.trim().length>0&&t.employment_type.trim().length>0&&!(t.salary_amount&&!t.salary_unit);return e.jsx(B,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Jobb"}),e.jsx("p",{className:"text-muted-foreground",children:"Hantera dina rekryteringsuppdrag"})]}),e.jsxs(J,{open:w,onOpenChange:a=>a?o(!0):u(),children:[e.jsx(P,{asChild:!0,children:e.jsxs(l,{disabled:F,children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Lägg till jobb"]})}),e.jsxs(q,{className:"max-h-[90vh] overflow-y-auto",children:[e.jsx(I,{children:e.jsx(H,{children:r?"Redigera jobb":"Lägg till jobb"})}),E&&e.jsxs("p",{className:"text-m text-muted-foreground",children:[r?"Redigeras för konto: ":"Skapas för konto: ",e.jsx("span",{className:"font-medium",children:x})]}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"title",children:["Jobbtitel ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(c,{id:"title",value:t.title,onChange:a=>s({...t,title:a.target.value}),placeholder:"t.ex. Frontend-utvecklare",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"company",children:["Företag ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(c,{id:"company",value:t.company,onChange:a=>s({...t,company:a.target.value}),placeholder:"t.ex. TechAB",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"location",children:["Plats ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(c,{id:"location",value:t.location,onChange:a=>s({...t,location:a.target.value}),placeholder:"t.ex. Stockholm",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"employmentType",children:["Anställningsform ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(g,{value:t.employment_type,onValueChange:a=>s({...t,employment_type:a}),children:[e.jsx(j,{id:"employmentType",children:e.jsx(v,{placeholder:"Välj anställningsform"})}),e.jsx(f,{children:oe.map(a=>e.jsx(N,{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"salaryAmount",children:"Lön"}),e.jsx(c,{id:"salaryAmount",type:"number",min:"0",value:t.salary_amount,onChange:a=>s({...t,salary_amount:a.target.value}),placeholder:"t.ex. 35000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"salaryUnit",children:"Lönetyp"}),e.jsxs(g,{value:t.salary_unit,onValueChange:a=>s({...t,salary_unit:a}),children:[e.jsx(j,{id:"salaryUnit",children:e.jsx(v,{placeholder:"Välj"})}),e.jsx(f,{children:ce.map(a=>e.jsx(N,{value:a.value,children:a.label},a.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"description",children:"Beskrivning"}),e.jsx(X,{id:"description",value:t.description,onChange:a=>s({...t,description:a.target.value}),placeholder:"Beskriv rollen...",rows:4})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(l,{type:"button",variant:"outline",onClick:u,children:"Avbryt"}),e.jsx(l,{type:"submit",disabled:!V,children:r?"Spara":"Skapa"})]})]})]})]})]}),C?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Laddar..."}):i.length===0?e.jsx(b,{className:"text-center py-12",children:e.jsxs(_,{children:[e.jsx(ne,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"font-medium text-lg mb-2",children:"Inga jobb ännu"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Lägg till ditt första rekryteringsuppdrag"})]})}):e.jsx("div",{className:`w-full ${i.length===2?"max-w-[1100px]":i.length===1?"max-w-[550px]":"max-w-[1900px]"}`,children:e.jsx("div",{className:"grid gap-2 [grid-template-columns:repeat(auto-fit,minmax(min(100%,28em),1fr))]",children:i.map(a=>e.jsxs(b,{className:"w-full min-w-0",children:[e.jsx(ee,{className:"pb-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(ae,{className:"text-lg",children:a.title}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>M(a),children:e.jsx(se,{className:"w-4 h-4"})}),e.jsxs(z,{children:[e.jsx(O,{asChild:!0,children:e.jsx(l,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",children:e.jsx(le,{className:"w-4 h-4"})})}),e.jsxs(R,{children:[e.jsxs(U,{children:[e.jsx(Y,{children:"Ta bort jobb?"}),e.jsx($,{children:"Detta tar bort jobbet och alla kopplade kandidater. Åtgarden går inte att ångra."})]}),e.jsxs(Z,{children:[e.jsx(G,{asChild:!0,children:e.jsx(l,{type:"button",variant:"outline",children:"Avbryt"})}),e.jsx(K,{asChild:!0,children:e.jsx(l,{type:"button",variant:"destructive",onClick:()=>T.mutate(a.id),children:"Ta bort"})})]})]})]})]})]})}),e.jsx(_,{children:e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[a.company&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:a.company})]}),a.location&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4"}),e.jsx("span",{children:a.location})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:a.employment_type?`Anställningsform: ${a.employment_type}`:"Anställningsform: Ej angiven"})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{children:[a.salary_amount?`Lön: ${Number(a.salary_amount).toLocaleString("sv-SE")} kr`:"Lön: Ej angiven",a.salary_amount&&(a.salary_unit==="hourly"?" / tim":a.salary_unit==="monthly"?" / mån":"")]})}),e.jsx("p",{className:"line-clamp-2 pt-2 border-t border-border mt-3",children:a.description||"Ingen beskrivning angiven"})]})})]},a.id))})})]})})}export{ke as default};
