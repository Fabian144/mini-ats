import{r as n,j as e}from"./vendor-radix-DY4qudGL.js";import{u as w,a as j,s as v}from"./index-DNV64M_Z.js";import{U as y,I as c,B as m}from"./input-DfHDpxEA.js";import{C as N,a as b,b as k,c as C,d as S,L as p}from"./card-Bc5TMgtP.js";import{u as U}from"./vendor-react-EpQGxqdE.js";import"./vendor-supabase-6c5mf4pY.js";import"./vendor-recharts-zFAyUZWb.js";import"./vendor-query-CH72qb2W.js";function F(){const[r,u]=n.useState(""),[i,h]=n.useState(""),[d,o]=n.useState(!1),{updatePassword:x}=w(),l=U(),{toast:a}=j();n.useEffect(()=>{v.auth.getSession()},[]);const f=()=>{const s=new URL(window.location.href),t=new URLSearchParams(s.search);s.hash="",t.get("type")==="recovery"&&(t.delete("type"),s.search=t.toString()?`?${t.toString()}`:""),window.history.replaceState({},"",s.toString())},g=async s=>{if(s.preventDefault(),r.length<6){a({title:"Lösenordet är för kort",description:"Välj ett lösenord med minst 6 tecken.",variant:"destructive"});return}if(r!==i){a({title:"Lösenorden matchar inte",description:"Kontrollera att båda fälten har samma lösenord.",variant:"destructive"});return}o(!0);const{error:t}=await x(r);t?a({title:"Kunde inte uppdatera lösenord",description:t.message,variant:"destructive"}):(a({title:"Lösenord uppdaterat",description:"Du kan nu logga in med ditt nya lösenord."}),f(),l("/auth")),o(!1)};return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md animate-fade-in",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-primary/10 mb-4",children:e.jsx(y,{className:"w-8 h-8 text-primary"})}),e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"TalentTrack"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Ditt smarta rekryteringsverktyg"})]}),e.jsxs(N,{className:"glass-card",children:[e.jsxs(b,{className:"text-center pb-2",children:[e.jsx(k,{children:"Återställ lösenord"}),e.jsx(C,{children:"Välj ett nytt lösenord för ditt konto."})]}),e.jsx(S,{children:e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(p,{htmlFor:"new-password",children:["Nytt lösenord ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(c,{id:"new-password",type:"password",placeholder:"Minst 6 tecken",value:r,onChange:s=>u(s.target.value),required:!0,minLength:6})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(p,{htmlFor:"confirm-password",children:["Bekräfta lösenord ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(c,{id:"confirm-password",type:"password",placeholder:"Upprepa lösenordet",value:i,onChange:s=>h(s.target.value),required:!0,minLength:6})]}),e.jsx(m,{type:"submit",className:"w-full",disabled:d,children:d?"Uppdaterar...":"Uppdatera lösenord"}),e.jsx(m,{type:"button",variant:"link",className:"px-0",onClick:()=>l("/auth"),children:"Tillbaka till inloggning"})]})})]})]})})}export{F as default};
