import{r as h,j as e}from"./vendor-radix-og3wzDO_.js";import{D as V,e as J,f as P,g as B,h as q,i as I,S as y,a as g,b as j,c as v,d as f,A as H,j as z,k as O,l as R,m as U,n as Y,o as $,p as Z,q as G}from"./select-B5DXAlz1.js";import{u as K}from"./useJobs-BGVYX9L3.js";import{b as _,u as Q}from"./index-V309Dh23.js";import{B as l}from"./button-DtMPGEdD.js";import{L as n,I as c}from"./label-Bn_blq1I.js";import{T as W}from"./textarea-BXlT55RP.js";import{C as N,d as b,a as X,b as ee}from"./card-CCBrG6Tp.js";import{P as ae,S as te,T as se}from"./trash-2-C-2Hj2Vf.js";import{B as le}from"./briefcase-hffvMhGs.js";import"./vendor-supabase-6c5mf4pY.js";import"./vendor-react-B2XFA_K-.js";import"./vendor-query-CUB_NE-9.js";import"./vendor-recharts-qYF2F-lo.js";const ne=_("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const re=_("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),ie=["Deltid","Tillsvidare","Heltid","Säsongsarbete","Vikariat","Extrajobb","Sommarjobb","Visstid","Möjlighet till förnyat kontrakt","Projekt","Praktik"],oe=[{value:"monthly",label:"Månadsvis"},{value:"hourly",label:"Timlön"}];function _e(){const{isAdmin:k,adminViewAccount:d,user:C}=Q(),{jobs:i,isLoading:A,createJob:S,updateJob:D,deleteJob:T}=K(),[w,o]=h.useState(!1),[r,m]=h.useState(null),[t,s]=h.useState({title:"",company:"",location:"",description:"",employment_type:"",salary_amount:"",salary_unit:""}),L=a=>{if(a.preventDefault(),!t.employment_type||t.salary_amount&&!t.salary_unit)return;const x={...t,employment_type:t.employment_type||null,salary_amount:t.salary_amount?Number(t.salary_amount):null,salary_unit:t.salary_unit||null};r?D.mutate({id:r.id,...x}):S.mutate(x),o(!1),m(null),s({title:"",company:"",location:"",description:"",employment_type:"",salary_amount:"",salary_unit:""})},M=a=>{m(a),s({title:a.title,company:a.company||"",location:a.location||"",description:a.description||"",employment_type:a.employment_type||"",salary_amount:a.salary_amount?.toString()||"",salary_unit:a.salary_unit||""}),o(!0)},p=()=>{o(!1),m(null),s({title:"",company:"",location:"",description:"",employment_type:"",salary_amount:"",salary_unit:""})},F=k&&!d,u=d?.fullName||d?.email||C?.email,E=t.title.trim().length>0&&t.company.trim().length>0&&t.location.trim().length>0&&t.employment_type.trim().length>0&&!(t.salary_amount&&!t.salary_unit);return e.jsx(V,{children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Jobb"}),e.jsx("p",{className:"text-muted-foreground",children:"Hantera dina rekryteringsuppdrag"})]}),e.jsxs(J,{open:w,onOpenChange:a=>a?o(!0):p(),children:[e.jsx(P,{asChild:!0,children:e.jsxs(l,{disabled:F,children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),"Lägg till jobb"]})}),e.jsxs(B,{className:"max-h-[90vh] overflow-y-auto",children:[e.jsx(q,{children:e.jsx(I,{children:r?"Redigera jobb":"Lägg till jobb"})}),u&&e.jsxs("p",{className:"text-m text-muted-foreground",children:[r?"Redigeras för konto: ":"Skapas för konto: ",e.jsx("span",{className:"font-medium",children:u})]}),e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"title",children:["Jobbtitel ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(c,{id:"title",value:t.title,onChange:a=>s({...t,title:a.target.value}),placeholder:"t.ex. Frontend-utvecklare",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"company",children:["Företag ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(c,{id:"company",value:t.company,onChange:a=>s({...t,company:a.target.value}),placeholder:"t.ex. TechAB",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"location",children:["Plats ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(c,{id:"location",value:t.location,onChange:a=>s({...t,location:a.target.value}),placeholder:"t.ex. Stockholm",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(n,{htmlFor:"employmentType",children:["Anställningsform ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(y,{value:t.employment_type,onValueChange:a=>s({...t,employment_type:a}),children:[e.jsx(g,{id:"employmentType",children:e.jsx(j,{placeholder:"Välj anställningsform"})}),e.jsx(v,{children:ie.map(a=>e.jsx(f,{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"salaryAmount",children:"Lön"}),e.jsx(c,{id:"salaryAmount",type:"number",min:"0",value:t.salary_amount,onChange:a=>s({...t,salary_amount:a.target.value}),placeholder:"t.ex. 35000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"salaryUnit",children:"Lönetyp"}),e.jsxs(y,{value:t.salary_unit,onValueChange:a=>s({...t,salary_unit:a}),children:[e.jsx(g,{id:"salaryUnit",children:e.jsx(j,{placeholder:"Välj"})}),e.jsx(v,{children:oe.map(a=>e.jsx(f,{value:a.value,children:a.label},a.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"description",children:"Beskrivning"}),e.jsx(W,{id:"description",value:t.description,onChange:a=>s({...t,description:a.target.value}),placeholder:"Beskriv rollen...",rows:4})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(l,{type:"button",variant:"outline",onClick:p,children:"Avbryt"}),e.jsx(l,{type:"submit",disabled:!E,children:r?"Spara":"Skapa"})]})]})]})]})]}),A?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"Laddar..."}):i.length===0?e.jsx(N,{className:"text-center py-12",children:e.jsxs(b,{children:[e.jsx(le,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"font-medium text-lg mb-2",children:"Inga jobb ännu"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Lägg till ditt första rekryteringsuppdrag"})]})}):e.jsx("div",{className:`w-full ${i.length===2?"max-w-[1100px]":i.length===1?"max-w-[550px]":"max-w-[1900px]"}`,children:e.jsx("div",{className:"grid gap-2 [grid-template-columns:repeat(auto-fit,minmax(min(100%,28em),1fr))]",children:i.map(a=>e.jsxs(N,{className:"w-full min-w-0",children:[e.jsx(X,{className:"pb-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(ee,{className:"text-lg",children:a.title}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>M(a),children:e.jsx(te,{className:"w-4 h-4"})}),e.jsxs(H,{children:[e.jsx(z,{asChild:!0,children:e.jsx(l,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",children:e.jsx(se,{className:"w-4 h-4"})})}),e.jsxs(O,{children:[e.jsxs(R,{children:[e.jsx(U,{children:"Ta bort jobb?"}),e.jsx(Y,{children:"Detta tar bort jobbet och alla kopplade kandidater. Åtgarden går inte att ångra."})]}),e.jsxs($,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(l,{type:"button",variant:"outline",children:"Avbryt"})}),e.jsx(G,{asChild:!0,children:e.jsx(l,{type:"button",variant:"destructive",onClick:()=>T.mutate(a.id),children:"Ta bort"})})]})]})]})]})]})}),e.jsx(b,{children:e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[a.company&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:a.company})]}),a.location&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:a.location})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:a.employment_type?`Anställningsform: ${a.employment_type}`:"Anställningsform: Ej angiven"})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{children:[a.salary_amount?`Lön: ${Number(a.salary_amount).toLocaleString("sv-SE")} kr`:"Lön: Ej angiven",a.salary_amount&&(a.salary_unit==="hourly"?" / tim":a.salary_unit==="monthly"?" / mån":"")]})}),e.jsx("p",{className:"line-clamp-2 pt-2 border-t border-border mt-3",children:a.description||"Ingen beskrivning angiven"})]})})]},a.id))})})]})})}export{_e as default};
