import{j as e,h as fe,r,i as xe,s as w,k as ge,u as D,W as he,l as ye,t as be,n as Ne,p as je,m as k,O as ve,w as Ae,x as we,y as De,z as ke,B as _,I as _e,E as Ce,F as C,G as Se,H as S,J as Re,K as Te,S as R,M as T,N as E,Q as O}from"./vendor-radix-DY4qudGL.js";import{b as Ee,u as Oe,L as A}from"./vendor-react-EpQGxqdE.js";import{u as Pe}from"./vendor-query-CH72qb2W.js";import{b as h,c as i,u as Le,s as j}from"./index-DNV64M_Z.js";import{b as P,U as L,B as v}from"./input-DfHDpxEA.js";import{B as Ie}from"./briefcase-DVqZFEiA.js";const $e=h("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const I=h("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Me=h("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const ze=h("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);const qe=h("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const Be=h("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);var $="AlertDialog",[Ue]=we($,[w]),d=w(),M=s=>{const{__scopeAlertDialog:t,...a}=s,o=d(t);return e.jsx(fe,{...o,...a,modal:!0})};M.displayName=$;var Fe="AlertDialogTrigger",z=r.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...o}=s,l=d(a);return e.jsx(xe,{...l,...o,ref:t})});z.displayName=Fe;var Ve="AlertDialogPortal",q=s=>{const{__scopeAlertDialog:t,...a}=s,o=d(t);return e.jsx(ge,{...o,...a})};q.displayName=Ve;var He="AlertDialogOverlay",B=r.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...o}=s,l=d(a);return e.jsx(ve,{...l,...o,ref:t})});B.displayName=He;var g="AlertDialogContent",[Ke,Ge]=Ue(g),Qe=Ae("AlertDialogContent"),U=r.forwardRef((s,t)=>{const{__scopeAlertDialog:a,children:o,...l}=s,c=d(a),m=r.useRef(null),y=D(t,m),x=r.useRef(null);return e.jsx(he,{contentName:g,titleName:F,docsSlug:"alert-dialog",children:e.jsx(Ke,{scope:a,cancelRef:x,children:e.jsxs(ye,{role:"alertdialog",...c,...l,ref:y,onOpenAutoFocus:be(l.onOpenAutoFocus,p=>{p.preventDefault(),x.current?.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[e.jsx(Qe,{children:o}),e.jsx(Je,{contentRef:m})]})})})});U.displayName=g;var F="AlertDialogTitle",V=r.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...o}=s,l=d(a);return e.jsx(Ne,{...l,...o,ref:t})});V.displayName=F;var H="AlertDialogDescription",K=r.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...o}=s,l=d(a);return e.jsx(je,{...l,...o,ref:t})});K.displayName=H;var We="AlertDialogAction",G=r.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...o}=s,l=d(a);return e.jsx(k,{...l,...o,ref:t})});G.displayName=We;var Q="AlertDialogCancel",W=r.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...o}=s,{cancelRef:l}=Ge(Q,a),c=d(a),m=D(t,l);return e.jsx(k,{...c,...o,ref:m})});W.displayName=Q;var Je=({contentRef:s})=>{const t=`\`${g}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${g}\` by passing a \`${H}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${g}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return r.useEffect(()=>{document.getElementById(s.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,s]),null},Ye=M,Xe=z,Ze=q,J=B,Y=U,X=G,Z=W,ee=V,ae=K;const ea=Ye,aa=Xe,ta=Ze,te=r.forwardRef(({className:s,...t},a)=>e.jsx(J,{className:i("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:a}));te.displayName=J.displayName;const se=r.forwardRef(({className:s,...t},a)=>e.jsxs(ta,{children:[e.jsx(te,{}),e.jsx(Y,{ref:a,className:i("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));se.displayName=Y.displayName;const re=({className:s,...t})=>e.jsx("div",{className:i("flex flex-col space-y-2 text-center sm:text-left",s),...t});re.displayName="AlertDialogHeader";const oe=({className:s,...t})=>e.jsx("div",{className:i("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});oe.displayName="AlertDialogFooter";const le=r.forwardRef(({className:s,...t},a)=>e.jsx(ee,{ref:a,className:i("text-lg font-semibold",s),...t}));le.displayName=ee.displayName;const sa=r.forwardRef(({className:s,...t},a)=>e.jsx(ae,{ref:a,className:i("text-sm text-muted-foreground",s),...t}));sa.displayName=ae.displayName;const ie=r.forwardRef(({className:s,...t},a)=>e.jsx(X,{ref:a,className:i(P(),s),...t}));ie.displayName=X.displayName;const ne=r.forwardRef(({className:s,...t},a)=>e.jsx(Z,{ref:a,className:i(P({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));ne.displayName=Z.displayName;const ra=[{href:"/dashboard",icon:ze,label:"Kanban"},{href:"/jobs",icon:Ie,label:"Jobb"},{href:"/candidates",icon:L,label:"Kandidater"}],ga=r.memo(function({children:t}){const{user:a,signOut:o,isAdmin:l,adminViewAccount:c}=Le(),m=Ee(),y=Oe(),x=Pe(),[p,b]=r.useState(null),N=l&&c?.id?c.id:a?.id,me=c?.fullName||c?.email||"Alla konton",pe=p||a?.user_metadata?.full_name;r.useEffect(()=>{if(!a?.id){b(null);return}let n=!0;return j.from("profiles").select("full_name").eq("user_id",a.id).maybeSingle().then(({data:u,error:f})=>{if(n){if(f){b(null);return}b(u?.full_name??null)}}),()=>{n=!1}},[a?.id]),r.useEffect(()=>{if(!N)return;const n=N;x.prefetchQuery({queryKey:["candidates",n],queryFn:async()=>{const{data:u,error:f}=await j.from("candidates").select("id, user_id, job_id, name, email, phone, linkedin_url, notes, status, created_at, updated_at, jobs(id, title, company)").order("created_at",{ascending:!1}).limit(200);if(f)throw f;return u},staleTime:1e3*60*2}),x.prefetchQuery({queryKey:["jobs",n],queryFn:async()=>{const{data:u,error:f}=await j.from("jobs").select("id, user_id, title, company, description, location, created_at, updated_at").order("created_at",{ascending:!1}).limit(200);if(f)throw f;return u},staleTime:1e3*60*2})},[N,x]);const ue=async()=>{await o(),y("/auth")};return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col md:flex-row",children:[e.jsxs("aside",{className:"w-full md:w-64 bg-sidebar text-sidebar-foreground flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-sidebar-border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-sidebar-primary flex items-center justify-center",children:e.jsx(L,{className:"w-5 h-5 text-sidebar-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-lg",children:"TalentTrack"}),e.jsx("p",{className:"text-xs text-sidebar-foreground/60",children:"Mini ATS"})]})]}),l&&e.jsxs("div",{className:"mt-3 rounded-md border border-sidebar-accent/40 bg-sidebar-accent/20 px-3 py-2",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-wide text-sidebar-foreground/60",children:"Visar konto"}),e.jsx("p",{className:"text-sm font-medium text-sidebar-foreground truncate",children:me})]})]}),e.jsxs("nav",{className:"flex-1 p-4 space-y-1",children:[ra.map(n=>{const u=m.pathname===n.href;return e.jsxs(A,{to:n.href,className:i("flex items-center gap-3 px-4 py-3 rounded-lg transition-colors",u?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent/50 hover:text-sidebar-foreground"),children:[e.jsx(n.icon,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:n.label})]},n.href)}),l&&e.jsxs(A,{to:"/admin",className:i("flex items-center gap-3 px-4 py-3 rounded-lg transition-colors",m.pathname==="/admin"?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent/50 hover:text-sidebar-foreground"),children:[e.jsx(Be,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Admin"})]})]}),e.jsxs("div",{className:"p-4 border-t border-sidebar-border",children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 mb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-sidebar-accent flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium",children:a?.email?.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:pe}),e.jsx("p",{className:"text-xs text-sidebar-foreground/60 truncate",children:a?.email}),e.jsx("p",{className:"text-xs text-sidebar-foreground/60",children:l?"Admin":"Kund"})]})]}),e.jsxs(ea,{children:[e.jsx(aa,{asChild:!0,children:e.jsxs(v,{variant:"ghost",className:"w-full justify-start text-sidebar-foreground/70 hover:text-sidebar-foreground hover:bg-sidebar-accent/50",children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"Logga ut"]})}),e.jsxs(se,{children:[e.jsx(re,{children:e.jsx(le,{children:"Logga ut frÃ¥n kontot?"})}),e.jsxs(oe,{children:[e.jsx(ne,{asChild:!0,children:e.jsx(v,{type:"button",variant:"outline",children:"Avbryt"})}),e.jsx(ie,{asChild:!0,children:e.jsx(v,{type:"button",onClick:ue,children:"Logga ut"})})]})]})]})]})]}),e.jsx("main",{className:"flex-1 overflow-auto",children:t})]})}),ha=De,ya=ke,oa=r.forwardRef(({className:s,children:t,...a},o)=>e.jsxs(_,{ref:o,className:i("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...a,children:[t,e.jsx(_e,{asChild:!0,children:e.jsx(I,{className:"h-4 w-4 opacity-50"})})]}));oa.displayName=_.displayName;const de=r.forwardRef(({className:s,...t},a)=>e.jsx(R,{ref:a,className:i("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Me,{className:"h-4 w-4"})}));de.displayName=R.displayName;const ce=r.forwardRef(({className:s,...t},a)=>e.jsx(T,{ref:a,className:i("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(I,{className:"h-4 w-4"})}));ce.displayName=T.displayName;const la=r.forwardRef(({className:s,children:t,position:a="popper",...o},l)=>e.jsx(Ce,{children:e.jsxs(C,{ref:l,className:i("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:a,...o,children:[e.jsx(de,{}),e.jsx(Se,{className:i("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(ce,{})]})}));la.displayName=C.displayName;const ia=r.forwardRef(({className:s,...t},a)=>e.jsx(E,{ref:a,className:i("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));ia.displayName=E.displayName;const na=r.forwardRef(({className:s,children:t,...a},o)=>e.jsxs(S,{ref:o,className:i("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground data-[state=checked]:pl-8 group",s),...a,children:[e.jsx("span",{className:"absolute left-2 hidden h-3.5 w-3.5 items-center justify-center group-data-[state=checked]:flex",children:e.jsx(Re,{children:e.jsx($e,{className:"h-4 w-4"})})}),e.jsx(Te,{children:t})]}));na.displayName=S.displayName;const da=r.forwardRef(({className:s,...t},a)=>e.jsx(O,{ref:a,className:i("-mx-1 my-1 h-px bg-muted",s),...t}));da.displayName=O.displayName;export{ea as A,ga as D,ha as S,oa as a,ya as b,la as c,na as d,aa as e,se as f,re as g,le as h,sa as i,oe as j,ne as k,ie as l};
