import{r as o,j as e}from"./vendor-radix-DY4qudGL.js";import{S as v,a as N,b as y,c as k,d as u,D as w}from"./select-D7EeeO1m.js";import{L as S,M as C,P as D,u as I}from"./useCandidates-DcPtYUHi.js";import{u as L}from"./useJobs-BzRlCnPU.js";import{I as E}from"./input-h_5tXWFu.js";import{b as f,d as K}from"./index-mAFw_Uzw.js";import{B as M}from"./briefcase-RTyYyln2.js";import"./vendor-supabase-6c5mf4pY.js";import"./vendor-react-EpQGxqdE.js";import"./vendor-query-CH72qb2W.js";import"./vendor-recharts-zFAyUZWb.js";const T=f("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const A=f("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),B=o.memo(function({candidate:s}){const c=t=>{t.dataTransfer.setData("candidateId",s.id)},l=K(s.linkedin_url);return e.jsxs("div",{draggable:!0,onDragStart:c,className:"kanban-card animate-fade-in",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx("h4",{className:"font-medium text-foreground",children:s.name}),l&&e.jsx("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80 transition-colors",onClick:t=>t.stopPropagation(),children:e.jsx(S,{className:"w-4 h-4"})})]}),s.jobs&&e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground mb-2",children:[e.jsx(M,{className:"w-3 h-3"}),e.jsx("span",{children:s.jobs.title}),s.jobs.company&&e.jsxs("span",{className:"text-muted-foreground/70",children:["@ ",s.jobs.company]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-muted-foreground",children:[s.email&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"w-3 h-3"}),e.jsx("span",{className:"truncate max-w-[120px]",children:s.email})]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"w-3 h-3"}),e.jsx("span",{children:s.phone})]})]}),s.notes&&e.jsx("p",{className:"mt-2 text-xs text-muted-foreground line-clamp-2 border-t border-border pt-2",children:s.notes})]})}),J={new:"bg-status-new",screening:"bg-status-screening",interview:"bg-status-interview",offer:"bg-status-offer",hired:"bg-status-hired",rejected:"bg-status-rejected"},q=o.memo(function({status:s,label:c,candidates:l,onStatusChange:t}){const x=r=>{r.preventDefault()},i=r=>{r.preventDefault();const d=r.dataTransfer.getData("candidateId");d&&t(d,s)};return e.jsxs("div",{className:"kanban-column w-72 flex-shrink-0",onDragOver:x,onDrop:i,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${J[s]}`}),e.jsx("h3",{className:"font-semibold text-foreground",children:c}),e.jsx("span",{className:"ml-auto text-sm text-muted-foreground bg-secondary px-2 py-0.5 rounded-full",children:l.length})]}),e.jsxs("div",{className:"space-y-3",children:[l.map(r=>e.jsx(B,{candidate:r},r.id)),l.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"Inga kandidater"})]})]})}),h=[{key:"new",label:"Ny"},{key:"screening",label:"Screening"},{key:"interview",label:"Intervju"},{key:"offer",label:"Erbjudande"},{key:"hired",label:"Anställd"},{key:"rejected",label:"Avslag"}];function F(){const{candidates:m,isLoading:s,updateCandidate:c}=I(),{jobs:l}=L(),[t,x]=o.useState(""),[i,r]=o.useState("all"),d=o.useMemo(()=>{const a=t.toLowerCase();return m.filter(n=>{const g=n.name.toLowerCase().includes(a),b=i==="all"||n.job_id===i;return g&&b})},[m,t,i]),p=o.useMemo(()=>{const a=new Map;for(const n of h)a.set(n.key,[]);for(const n of d)a.get(n.status)?.push(n);return a},[d]),j=o.useCallback((a,n)=>{c.mutate({id:a,status:n})},[c]);return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-pulse text-muted-foreground",children:"Laddar..."})}):e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex gap-4 mb-6 flex-wrap",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-sm",children:[e.jsx(A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(E,{placeholder:"Sök kandidat...",value:t,onChange:a=>x(a.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs(v,{value:i,onValueChange:r,children:[e.jsx(N,{className:"w-[200px]",children:e.jsx(y,{placeholder:"Filtrera på jobb"})}),e.jsxs(k,{children:[e.jsx(u,{value:"all",children:"Alla jobb"}),l.map(a=>e.jsx(u,{value:a.id,children:a.title},a.id))]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-x-auto",children:e.jsx("div",{className:"flex gap-4 min-w-max pb-4",children:h.map(a=>e.jsx(q,{status:a.key,label:a.label,candidates:p.get(a.key)??[],onStatusChange:j},a.key))})})]})}function W(){return e.jsx(w,{children:e.jsxs("div",{className:"p-6 h-screen flex flex-col",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Rekryteringsöversikt"}),e.jsx("p",{className:"text-muted-foreground",children:"Dra och släpp kandidater för att ändra status"})]}),e.jsx("div",{className:"flex-1",children:e.jsx(F,{})})]})})}export{W as default};
